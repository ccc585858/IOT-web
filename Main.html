
            <!DOCTYPE html>
            <html lang="en">
            
            <head>
                <meta charset="UTF-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>儲蓄愛地球</title>
                <!-- css連結 -->
                <link rel="stylesheet" href="style.css">
				<link rel="stylesheet" href="https://unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css">
				<link rel="stylesheet" href="https://unpkg.com/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css">
            
                <!-- JQuery連結 -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
            
                <!-- JS連結 -->
                <script src="script.js"></script>
				<script src="https://unpkg.com/jquery@3.4.1/dist/jquery.min.js"></script>
				<script src="https://unpkg.com/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
				<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js"></script>
            
                <!-- FontAwesome 連結 -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
				
                <!-- Bootstrap 連結 -->
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
				
				            
            </head>
            
            <body background="1.jpg" style="background-attachment: fixed;
            background-position: center;
            background-size: cover;">
            
                <div class="container-all">
            
            
                    <!-- 左邊 -->
                    <div class="container-left">
                        <!-- 導覽列 -->
                        <nav id="sidebar">
            
                            <!-- 展往/縮起來 按鈕 -->
            
                            <button type="button" id="collapse" class="collapse-btn">
							<i class="fas fa-align-left"></i>
							</button>
            
            
                            <!-- List 列表 -->
                            <ul class="list-unstyled">
                                <p> 綠能儲蓄 </p>
            
            
                                <li>
                                    <a href="#數據分析" data-toggle="tab" style="font-weight:bold;">首頁Home <i class="fas fa-home"></i>  </a>
                                </li>
                                <li>
                                    <a href="#sub" data-bs-toggle="collapse" id="dropdown" style="font-weight:bold;">圖解 <i class="fas fa-image"></i> </a>
									<ul id="sub" class="list-unstyled collapse">
								<ol>
									<ul>	
										<ol>
                                            <a href="#智能存錢筒" data-toggle="tab">智能存錢筒</a>
                                        </ol>
                                        <ol>
                                            <a href="#植栽" data-toggle="tab">植栽</a>
                                        </ol>
                                                    
                                    </ul>
								</ol>
									</ul>
								</li>
								
								
								<li>
                                    <a href="#手動澆水" data-toggle="tab" style="font-weight:bold;">盆栽 <i class="fas fa-seedling"></i>  </a>
                                </li>
                                <li>
                                    <a href="#sublist" data-bs-toggle="collapse" id="dropdown" style="font-weight:bold;">製作 <i class="far fa-bookmark"></i></a>
            
                                    <!-- 子連結列表  -->
                                    <ul id="sublist" class="list-unstyled collapse">
                                       <ol>
											<ul>
												<ol>
													<a id=1 href="#製作動機" data-toggle="tab" >製作動機</a>
												</ol>
												<ol>
													<a id=10 href="#製作目的" data-toggle="tab" >製作目的</a>
												</ol>
												<ol>
													<a id=2 href="#研究事項" data-toggle="tab" >研究事項</a>
												</ol>
            
											</ul>
										</ol>
            
                                    </ul>
            
            
                                </li>
            

                            </ul>
            
            
                        </nav>
            
                    </div>
            
                    <!-- 右邊 -->				
                    <div class="container-right">
					<div class="tab-content">
					
					<div class="tab-pane active" id="數據分析" style="padding:25px;">					
					<p><h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">數據分析</h1></p>
					<br><br>
					<iframe src="https://thingspeak.com/channels/1908688/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=3&type=line" style="height:300px;width:450px;"></iframe>
					<br>
					<iframe src="https://thingspeak.com/channels/1908688/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15" style="height:300px;width:450px;"></iframe>
					<iframe src="https://thingspeak.com/channels/1908688/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15" style="height:300px;width:450px;"></iframe>
					</div>
					
					<div class="tab-pane" id="智能存錢筒">
					<!--css-->
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">智能存錢筒</h1>
					<br><br>
					<img src="piggy bank.jpg" style="display:block; margin:auto;" >
					<!--補空格防止文字被蓋掉-->
					</div>
					
					<div class="tab-pane" id="植栽">
					<!--css-->
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">植栽</h1>
					<br><br>
					<img src="plant.jpg" style="display:block; margin:auto;" >
					<!--補空格防止文字被蓋掉-->
					</div>
					
                    <div class="tab-pane" id="製作動機" style="align:center;text-align:center;">
					<!--
					css美化可以在style裡面進行調整
					或是在上面輸入style標籤定義
					或是用檔案連結.css檔案
					-->
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">製作動機</h1>
					<br><br>
					<p align="left" style="font-size:23px;padding:65px;" >
					因近年發生全球性的疫情，在這段期間發展出不同的生活方式，其中遠距教學、遠距工作是最多人會實際碰到的，而這種生活的改變，<br>「家」就是大家開始回歸的地方。
					而在家的時間增加後，也有越來越多人會對於「生活中的儀式感」有了不同的感受，會希望開始改變<br>或增加家裡的擺設，而藉由這次IOT物聯網的課程中，本組想以寓教娛樂且擁有擺設性的作品來作為一個新穎的開端。經過討論後，我們<br>覺得存錢筒是一個通用各年齡層的商品，除了可以提早讓孩子有儲蓄的習慣也可以讓孩子了解程式語言的樂趣，促進親子同樂的時光。<br>	而與植栽的結合是因種植植物近期的盛行，而想加入到此裝置增加擺設性和趣味性，但一樣不失初衷，連結物聯網來連接感測器來達成<br>自動澆花和遠程澆花的功能。</p>
					<!--補空格防止文字被蓋掉-->
					</div>
					
					<div class="tab-pane" id="製作目的">
					<!--css-->
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">製作目的</h1>
					<br><br>
					<p align="left" style="font-size:23px;padding:65px;">
					1.智能存錢筒
					本組使用不同的感應器組合所製作的智慧存錢筒，可將硬幣及紙鈔藉由投幣口的感應器所組成的系統，辨識投入之金額大<br>小然後進行紀錄，再透過網路雲端同步彙整進入資料庫。再者藉由THING SPEAK網頁介面或手機APP(MQTT DASH BOARD)來顯示數<br>據可以隨時了解存款狀況。
					存錢筒為一個可以對應全年齡向的一款作品(商品)，其中軟體的高擴展性可以衍生出各式各樣的方式來連接，<br>讓使用者在使用的過程中能夠體會其中的樂趣。<br><br>

					2.智慧盆栽
					土壤的乾濕度和植物生長息息相關，若不多加注意可能導致植物生長不佳，因此一般日常生活中，自行種植之植物大多需要<br>由人力來照顧，但現代生活忙碌者較多，需要付出較多心力跟時間才能使植物順利成長。
					因而產生使用物聯網來「自動照顧植物」的想<br>法，以「物聯網」的概念來解說就是透過網路將生活中的事物串聯起來，讓使用者能藉由顯示的數據來增加生活的便利性或效率等，於<br>是開始思考如何開發一個完善且具有人性化、便利性和實用性的植栽系統。</p>
					<!--補空格防止文字被蓋掉-->
					</div>
					
					<div class="tab-pane" id="研究事項">
					<!--css-->
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">研究事項</h1>
					<br><br>
					<p align="left" style="font-size:23px;padding:65px;">
					以MQTT DASH BOARD來顯示存錢筒(含硬幣、紙鈔)之金額數字和全數取出後歸零按鍵及智能盆栽顯示空氣濕度、土壤溫濕度和遠端<br>自行手動操控澆水按鍵。
					而存錢筒內硬幣部分是使用HW096A 來感應硬幣掉落之數量和累加金額，紙鈔機則是使用TCS3472來分辨<br>紙鈔顏色來確定金額和累計，植栽部分是以SRD-12-VDC-SL-C感應土壤濕度，最後由PICO當感測控制用，ESP32為通訊使用，將數<br>據上傳至MQTT。
					<br><br>
					 <img src="存錢筒感應過程.jpg" width="97%" height="50%"> 
					<!--補空格防止文字被蓋掉-->
					</div>
					
					<div class="tab-pane" id="天氣預報" style="padding:25px;">
					<p<h1 style="color:#408080;font-size:60px">天氣預報</h1></p>
					<iframe src="https://www.cwb.gov.tw/V8/C/W/week.html" style="height:1250px;width:1250px;"></iframe>
					</div>
				
					<div class="tab-pane" id="手動澆水" style="padding:25px;" align="center">
					<h1 style="color:#6C6C6C;font-size:65px;font-weight: bold;">澆水</h1>
					<br><br>
					<div><a href="javascript:void(0)"><img src="tube.jpg" title="手動澆水"class="W1" id="W" value="澆水" 
					style="height:500px;
					width:500px;
					background-position: center;"
					></a>
					</div>
					
					<div class="moto_text" style="display:none">
					<input type="text" id="mqtt_text" />
					<button id="mqtt_pub"></button>
					</div>
					
			
				</div>
            
                </div>
				<br>
				<input type="text" id="test" value=" " style="display:none">            
                </div>
				
				</div>
				
<script>
function up () {
		$('#test').val("web on");
		var message1 = new Paho.MQTT.Message(test.value);
		message1.destinationName = TOPIC ;
		client.send(message1);
		test.value = '';
	}
	$('#W').click(function (){
		up();
	});
const TOPIC = "plant/1205";
var client = false;

	function onConnect() {
		// 用戶端連接成功後，才訂閱主題
		console.log("onConnect then subscribe topic:"+ TOPIC + "/#");
		client.subscribe(TOPIC + "/#");
	}
	function onConnectFail() {
	  
		console.log("Connect Fail");
	 
	}
	// 收到訊息時...
	function onMessageArrived(message) {
		console.log("onMessageArrived:"+message.payloadString);
		msg=message.payloadString
		//document.getElementById("mqtt_monitor").innerHTML = message.payloadString;
		$('#messages').append($('<li>').text(msg));
	}
	// 發佈訊息
	function publish_message() {
		var input_text = document.getElementById("mqtt_text");
		var payload = input_text.value;
		var message = new Paho.MQTT.Message(payload);
		message.destinationName = TOPIC ;
		client.send(message);
		input_text.value = '';
	}

	function init() {
		document.getElementById("mqtt_pub").addEventListener('click', publish_message);
		// 建立 MQTT 用戶端實體. 你必須正確寫上你設置的埠號.
		// ClientId 可以自行指定，提供 MQTT broker 認證用
		client = new Paho.MQTT.Client("MQTTGO.io",8000,'car35');

		// 指定收到訊息時的處理動作
		client.onMessageArrived = onMessageArrived;

		// 連接 MQTT broker
		client.connect({onSuccess:onConnect, onFailure:onConnectFail});
	}

	window.addEventListener('load', init, false);
	//document.addEventListener('DOMContentLoaded', init, false);
	
</script>				
</body>
            
</html>
      